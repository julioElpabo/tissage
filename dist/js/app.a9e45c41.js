(function(){"use strict";var t={6448:function(t,e,s){var i=s(2856),o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("TissageView")],1)},l=[],n=(s(8111),s(2489),function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid m-4"},[e("h2",{staticClass:"mb-4"},[t._v("MÃ©tier Ã  tisser")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-2"},[e("div",{staticClass:"mb-4"},[e("h5",[t._v("Fils horizontaux")]),t._l(t.filsHorizontal,(function(s,i){return e("div",{key:"fh-"+i,staticClass:"d-flex align-items-center mb-1"},[e("div",{staticClass:"d-flex",staticStyle:{gap:"2px"}},t._l(s.couleurs,(function(t,s){return e("div",{key:"fhc-"+i+"-"+s,style:{backgroundColor:t,width:"18px",height:"18px",border:"1px solid #aaa"}})})),0),e("span",{staticClass:"ms-2 text-muted",staticStyle:{"font-size":"0.8em"}},[t._v(t._s(s.epaisseur)+" em")]),e("button",{staticClass:"btn btn-sm btn-outline-primary ms-1",on:{click:function(e){return t.openModal("horizontal",i)}}},[t._v("âœŽ")]),e("button",{staticClass:"btn btn-sm btn-outline-danger ms-1",on:{click:function(e){return t.removeFil("horizontal",i)}}},[t._v("ðŸ—‘")])])})),e("button",{staticClass:"btn btn-sm btn-outline-primary mt-2",on:{click:function(e){return t.openModal("horizontal")}}},[t._v("âž• Ajouter un fil")])],2),e("div",{staticClass:"mb-4"},[e("h5",[t._v("Fils verticaux")]),t._l(t.filsVertical,(function(s,i){return e("div",{key:"fv-"+i,staticClass:"d-flex align-items-center mb-1"},[e("div",{staticClass:"d-flex",staticStyle:{gap:"2px"}},t._l(s.couleurs,(function(t,s){return e("div",{key:"fvc-"+i+"-"+s,style:{backgroundColor:t,width:"18px",height:"18px",border:"1px solid #aaa"}})})),0),e("span",{staticClass:"ms-2 text-muted",staticStyle:{"font-size":"0.8em"}},[t._v(t._s(s.epaisseur)+" em")]),e("button",{staticClass:"btn btn-sm btn-outline-primary ms-1",on:{click:function(e){return t.openModal("vertical",i)}}},[t._v("âœŽ")]),e("button",{staticClass:"btn btn-sm btn-outline-danger ms-1",on:{click:function(e){return t.removeFil("vertical",i)}}},[t._v("ðŸ—‘")])])})),e("button",{staticClass:"btn btn-sm btn-outline-primary mt-2",on:{click:function(e){return t.openModal("vertical")}}},[t._v("âž• Ajouter un fil")])],2),e("div",{staticClass:"mb-4"},[e("h5",[t._v("ParamÃ¨tres")]),e("label",{staticClass:"form-label"},[t._v("Nombre de colonnes (fils verticaux)")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.nbColonnes,expression:"nbColonnes",modifiers:{number:!0}}],staticClass:"form-control mb-2",attrs:{type:"number"},domProps:{value:t.nbColonnes},on:{input:function(e){e.target.composing||(t.nbColonnes=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),e("label",{staticClass:"form-label"},[t._v("Nombre de lignes (fils horizontaux)")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.nbLignes,expression:"nbLignes",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.nbLignes},on:{input:function(e){e.target.composing||(t.nbLignes=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),e("label",{staticClass:"form-label"},[t._v("Ã‰chelle")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.echelle,expression:"echelle",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.echelle},on:{input:function(e){e.target.composing||(t.echelle=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),e("div",{staticClass:"form-check mb-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.afficherClous,expression:"afficherClous"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"toggleClous"},domProps:{checked:Array.isArray(t.afficherClous)?t._i(t.afficherClous,null)>-1:t.afficherClous},on:{change:function(e){var s=t.afficherClous,i=e.target,o=!!i.checked;if(Array.isArray(s)){var l=null,n=t._i(s,l);i.checked?n<0&&(t.afficherClous=s.concat([l])):n>-1&&(t.afficherClous=s.slice(0,n).concat(s.slice(n+1)))}else t.afficherClous=o}}}),e("label",{staticClass:"form-check-label",attrs:{for:"toggleClous"}},[t._v("Afficher les clous")])])])]),e("div",{staticClass:"col-lg-4"},[e("h5",{staticClass:"mt-3"},[t._v("AperÃ§u du tissage")]),t.filsHorizontal.length&&t.filsVertical.length?e("div",{ref:"preview",staticClass:"tissage-preview border position-relative",style:t.previewContainerStyle},[e("svg",{staticClass:"position-absolute",staticStyle:{top:"0",left:"0","z-index":"1"},attrs:{width:t.nbColonnes*t.distanceClousHorizontal+"em",height:t.nbLignes*t.distanceClousVertical+"em",viewBox:`0 0 ${t.nbColonnes*t.distanceClousHorizontal*10} ${t.nbLignes*t.distanceClousVertical*10}`,preserveAspectRatio:"none"}},[e("g",t._l(t.generateWeavingSegments(),(function(s,i){return e("path",t._b({key:"weave-"+i,attrs:{filter:s.filter?s.filter:void 0}},"path",s,!1))})),0)]),t.afficherClous?[t._l(t.clousHautActifs,(function(s){return e("div",{key:"clou-top-"+s.index,staticClass:"position-absolute clou",style:{top:`-${t.clouOffset}px`,left:s.index*t.distanceClousHorizontal+"em",transform:"translateX(-50%)"}})})),t._l(t.clousBasActifs,(function(s){return e("div",{key:"clou-bottom-"+s.index,staticClass:"position-absolute clou",style:{top:t.nbLignes*t.distanceClousVertical+"em",left:s.index*t.distanceClousHorizontal+"em",transform:"translateX(-50%)"}})})),t._l(t.clousGaucheActifs,(function(s){return e("div",{key:"clou-left-"+s.index,staticClass:"position-absolute clou",style:{left:`-${t.clouOffset}px`,top:s.index*t.distanceClousVertical+"em",transform:"translateY(-50%)"}})})),t._l(t.clousDroiteActifs,(function(s){return e("div",{key:"clou-right-"+s.index,staticClass:"position-absolute clou",style:{left:t.nbColonnes*t.distanceClousHorizontal+"em",top:s.index*t.distanceClousVertical+"em",transform:"translateY(-50%)"}})}))]:t._e()],2):t._e()]),e("div",{staticClass:"col-lg-6 d-flex flex-column"},[e("h5",{staticClass:"mt-3"},[t._v("RÃ©pÃ©tition "+t._s(t.echelle)+"x"+t._s(t.echelle))]),e("div",{staticClass:"flex-fill border",style:{backgroundImage:t.previewDataUrl?`url(${t.previewDataUrl})`:"none",backgroundRepeat:"repeat",backgroundSize:`${t.nbColonnes*t.distanceClousHorizontal/t.echelle}em ${t.nbLignes*t.distanceClousVertical/t.echelle}em`,backgroundColor:"#fff",minHeight:"0"}})])]),t.showModal?e("div",{staticClass:"modal-backdrop",staticStyle:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",background:"#00000088","z-index":"10"}},[e("div",{staticClass:"modal d-block",staticStyle:{"z-index":"11"},attrs:{tabindex:"-1"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(null!==t.editingIndex?"Modifier":"Ajouter")+" un fil "+t._s(t.modalType))]),e("button",{staticClass:"btn-close",attrs:{type:"button"},on:{click:function(e){return t.closeModal()}}})]),e("div",{staticClass:"modal-body"},[e("label",{staticClass:"form-label"},[t._v("Couleur")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalColor,expression:"modalColor"}],staticClass:"form-control form-control-color mb-3",attrs:{type:"color"},domProps:{value:t.modalColor},on:{input:function(e){e.target.composing||(t.modalColor=e.target.value)}}}),e("label",{staticClass:"form-label"},[t._v("Ã‰paisseur : "+t._s(t.modalEpaisseur.toFixed(2))+" em")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.modalEpaisseur,expression:"modalEpaisseur",modifiers:{number:!0}}],staticClass:"form-range",attrs:{type:"range",min:"0.2",max:"1.2",step:"0.01"},domProps:{value:t.modalEpaisseur},on:{__r:function(e){t.modalEpaisseur=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}),e("div",{staticClass:"my-3 mx-auto",style:{height:t.modalEpaisseur+"em",width:"80%",backgroundColor:t.modalColor,border:"1px solid #000",borderRadius:"4px"}})]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",on:{click:t.closeModal}},[t._v("Annuler")]),e("button",{staticClass:"btn btn-primary",on:{click:t.confirmAddFil}},[t._v("OK")])])])])])]):t._e()])}),a=[],r=(s(4114),s(1701),s(4533)),u=s.n(r),c={name:"TissageView",data(){return{filsHorizontal:[{couleurs:["#ff0000"],epaisseur:1},{couleurs:["#ffaa00"],epaisseur:1}],filsVertical:[{couleurs:["#1000ff"],epaisseur:1},{couleurs:["#55aaff"],epaisseur:1}],distanceClousHorizontal:1,distanceClousVertical:1,nbColonnes:31,nbLignes:35,echelle:3,clouOffset:10,showModal:!1,modalType:"horizontal",modalCouleurs:[],modalColor:"#000000",modalEpaisseur:.6,editingIndex:null,previewDataUrl:"",afficherClous:!0,clous:{haut:[0,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1],droite:[0,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1],bas:[0,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,0],gauche:[0,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0]}}},computed:{previewContainerStyle(){return{width:this.nbColonnes*this.distanceClousHorizontal+"em",height:this.nbLignes*this.distanceClousVertical+"em",backgroundColor:"#f0f0f0",padding:"10px",position:"relative"}},clousHautActifs(){return this.clous.haut.map(((t,e)=>({val:t,index:e}))).filter((t=>1===t.val))},clousBasActifs(){return this.clous.bas.map(((t,e)=>({val:t,index:e}))).filter((t=>1===t.val))},clousGaucheActifs(){return this.clous.gauche.map(((t,e)=>({val:t,index:e}))).filter((t=>1===t.val))},clousDroiteActifs(){return this.clous.droite.map(((t,e)=>({val:t,index:e}))).filter((t=>1===t.val))}},methods:{generateWeavingSegments(){const t=[],e=[],s=10*this.distanceClousHorizontal,i=10*this.distanceClousVertical;for(let o=0;o<this.nbLignes;o++)for(let l=0;l<this.nbColonnes;l++){const n=l*s,a=o*i,r=(o+l)%2,u=this.filsHorizontal[o%this.filsHorizontal.length],c=u.couleurs[0],d=10*u.epaisseur,f=.6+.4*Math.random(),m=d*f,h=a+i/2,p={d:`M ${n} ${h-m/2} H ${n+s} V ${h+m/2} H ${n} Z`,fill:c},v=this.filsVertical[l%this.filsVertical.length],b=v.couleurs[0],C=10*v.epaisseur,g=.6+.4*Math.random(),x=C*g,y=n+s/2,_={d:`M ${y-x/2} ${a} V ${a+i} H ${y+x/2} V ${a} Z`,fill:b};0===r?(t.push({..._,filter:"url(#ombre-dessous)"}),e.push(p)):(t.push({...p,filter:"url(#ombre-dessous)"}),e.push(_))}return[...t,...e]},generateHorizontalPath(t){const e=this.nbColonnes*this.distanceClousHorizontal*10,s=50,i=this.filsHorizontal[t%this.filsHorizontal.length],o=10*i.epaisseur;let l="",n=[],a=[];for(let r=0;r<=s;r++){const t=r/s*e,i=.6+.4*Math.random(),l=o*i;n.push(`${t},${-l/2}`),a.unshift(`${t},${l/2}`)}return l+=`M ${n[0]} L ${n.slice(1).join(" ")} L ${a.join(" ")} Z`,{d:l,fill:i.couleurs[0],transform:`translate(0, ${(t+.5)*this.distanceClousVertical*10})`}},generateVerticalPath(t){const e=this.nbLignes*this.distanceClousVertical*10,s=50,i=this.filsVertical[t%this.filsVertical.length],o=10*i.epaisseur;let l="",n=[],a=[];for(let r=0;r<=s;r++){const t=r/s*e,i=.6+.4*Math.random(),l=o*i;n.push(`${-l/2},${t}`),a.unshift(`${l/2},${t}`)}return l+=`M ${n[0]} L ${n.slice(1).join(" ")} L ${a.join(" ")} Z`,{d:l,fill:i.couleurs[0],transform:`translate(${(t+.5)*this.distanceClousHorizontal*10}, 0)`}},getHorizontalStyle(t){const e=this.filsHorizontal[t%this.filsHorizontal.length],s=e.couleurs[t%e.couleurs.length],i=(this.distanceClousVertical-e.epaisseur)/2;return{top:`${t*this.distanceClousVertical+i}em`,left:0,height:`${e.epaisseur}em`,width:"100%",backgroundColor:s,zIndex:1}},getVerticalStyle(t){const e=this.filsVertical[t%this.filsVertical.length],s=e.couleurs[t%e.couleurs.length],i=(this.distanceClousHorizontal-e.epaisseur)/2;return{left:`${t*this.distanceClousHorizontal+i}em`,top:0,width:`${e.epaisseur}em`,height:"100%",backgroundColor:s,zIndex:2}},removeFil(t,e){"horizontal"===t?this.filsHorizontal.splice(e,1):this.filsVertical.splice(e,1),this.updatePreview()},openModal(t,e=null){if(this.modalType=t,this.editingIndex=e,null!==e){const s="horizontal"===t?this.filsHorizontal[e]:this.filsVertical[e];this.modalCouleurs=[...s.couleurs],this.modalEpaisseur=s.epaisseur,this.modalColor=s.couleurs[0]}else this.modalCouleurs=[],this.modalEpaisseur=.6,this.modalColor="#000000";this.showModal=!0},closeModal(){this.showModal=!1,this.editingIndex=null},addColorToModal(){this.modalCouleurs.includes(this.modalColor)||this.modalCouleurs.push(this.modalColor)},confirmAddFil(){const t={couleurs:[this.modalColor],epaisseur:this.modalEpaisseur};"horizontal"===this.modalType?null!==this.editingIndex?this.filsHorizontal.splice(this.editingIndex,1,t):this.filsHorizontal.push(t):null!==this.editingIndex?this.filsVertical.splice(this.editingIndex,1,t):this.filsVertical.push(t),this.closeModal(),this.updatePreview()},updatePreview(){this.$nextTick((()=>{const t=this.$refs.preview;t&&u()(t).then((t=>{this.previewDataUrl=t.toDataURL()}))}))}},mounted(){this.updatePreview()},watch:{filsHorizontal:"updatePreview",filsVertical:"updatePreview",nbColonnes:"updatePreview",nbLignes:"updatePreview",distanceClousHorizontal:"updatePreview",distanceClousVertical:"updatePreview"}},d=c,f=s(1656),m=(0,f.A)(d,n,a,!1,null,"507e6a8d",null),h=m.exports,p={name:"App",components:{TissageView:h}},v=p,b=(0,f.A)(v,o,l,!1,null,null,null),C=b.exports;s(766);i.Ay.config.productionTip=!1,new i.Ay({render:t=>t(C)}).$mount("#app")}},e={};function s(i){var o=e[i];if(void 0!==o)return o.exports;var l=e[i]={exports:{}};return t[i].call(l.exports,l,l.exports,s),l.exports}s.m=t,function(){var t=[];s.O=function(e,i,o,l){if(!i){var n=1/0;for(c=0;c<t.length;c++){i=t[c][0],o=t[c][1],l=t[c][2];for(var a=!0,r=0;r<i.length;r++)(!1&l||n>=l)&&Object.keys(s.O).every((function(t){return s.O[t](i[r])}))?i.splice(r--,1):(a=!1,l<n&&(n=l));if(a){t.splice(c--,1);var u=o();void 0!==u&&(e=u)}}return e}l=l||0;for(var c=t.length;c>0&&t[c-1][2]>l;c--)t[c]=t[c-1];t[c]=[i,o,l]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,l,n=i[0],a=i[1],r=i[2],u=0;if(n.some((function(e){return 0!==t[e]}))){for(o in a)s.o(a,o)&&(s.m[o]=a[o]);if(r)var c=r(s)}for(e&&e(i);u<n.length;u++)l=n[u],s.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return s.O(c)},i=self["webpackChunktissage"]=self["webpackChunktissage"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[504],(function(){return s(6448)}));i=s.O(i)})();
//# sourceMappingURL=app.a9e45c41.js.map